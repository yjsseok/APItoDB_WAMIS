 manual.md


    1 # 사용자/관리자 매뉴얼 (Manual)
    2
    3 ## 1. WamisDataCollector 소개
    4
    5 WamisDataCollector는 국가수자원관리종합정보시스템(WAMIS)에서 제공하는
      수자원 관련 데이터를 자동으로 수집하여 PostgreSQL 데이터베이스에 저장해주는
      윈도우 애플리케이션입니다. 이 프로그램을 통해 강수량, 수위, 기상, 유량 등
      다양한 데이터를 손쉽게 관리하고 분석을 위한 기반을 마련할 수 있습니다.
    6
    7 ## 2. 시스템 요구사항
    8
    9 - **운영체제:** Windows 10 이상
   10 - **필수 소프트웨어:** .NET Framework 4.8 (대부분의 Windows에 기본 설치되어
      있음)
   11 - **데이터베이스:** PostgreSQL 서버 (네트워크를 통해 접근 가능해야 함)
   12
   13 ## 3. 설치 및 설정
   14
   15 ### 3.1. 프로그램 설치
   16
   17 WamisDataCollector는 별도의 설치 과정 없이 압축 해제 후 바로 사용할 수 있는
      포터블(Portable) 프로그램입니다.
   18
   19 1.  제공된 `WamisDataCollector.zip` 파일의 압축을 원하는 위치에 해제합니다.
   20 2.  압축 해제된 폴더로 이동합니다.
   21
   22 ### 3.2. 환경 설정
   23
   24 프로그램을 실행하기 전에, `config` 폴더 안에 있는 `App.config` 파일을
      수정하여 사용자의 환경에 맞게 설정을 변경해야 합니다.
   25
   26 1.  압축 해제한 폴더 내의 `config` 폴더로 이동합니다.
   27 2.  메모장이나 다른 텍스트 편집기로 `App.config` 파일을 엽니다.
   28 3.  `appSettings` 및 `connectionStrings` 섹션의 값을 아래 가이드에 따라
      수정합니다.

  <configuration>
    <appSettings>
      <!-- WAMIS에서 발급받은 일반 인증키를 입력합니다. -->
      <add key="WamisApiKey" value="YOUR_WAMIS_API_KEY" />
      <!-- WAMIS API 서버의 기본 URL입니다. 변경할 필요가 거의 없습니다. -->
      <add key="WamisBaseUrl" value="http://www.wamis.go.kr:8080/wamis/openapi" />
    </appSettings>
    <connectionStrings>
      <!-- 데이터를 저장할 PostgreSQL 데이터베이스의 연결 정보를 입력합니다. -->
      <add name="PostgreSqlConnection"

  connectionString="Server=YOUR_DB_SERVER_IP;Port=5432;Database=YOUR_DB_NAME;User
  Id=YOUR_DB_USER;Password=YOUR_DB_PASSWORD;" />
    </connectionStrings>
  </configuration>


    1
    2 -   **`WamisApiKey`**: WAMIS 포털에서 발급받은 본인의 API 인증키를
      `YOUR_WAMIS_API_KEY` 부분에 입력합니다.
    3 -   **`connectionString`**:
    4     -   `YOUR_DB_SERVER_IP`: PostgreSQL 데이터베이스 서버의 IP 주소 또는
      도메인 이름을 입력합니다.
    5     -   `YOUR_DB_NAME`: 데이터를 저장할 데이터베이스 이름을 입력합니다.
    6     -   `YOUR_DB_USER`: 데이터베이스 사용자 ID를 입력합니다.
    7     -   `YOUR_DB_PASSWORD`: 데이터베이스 사용자 비밀번호를 입력합니다.
    8
    9 4.  파일을 저장하고 닫습니다.
   10
   11 ## 4. 프로그램 사용법
   12
   13 ### 4.1. 프로그램 실행
   14
   15 -   압축 해제한 폴더에서 `APItoDB_WAMIS.exe` 파일을 더블클릭하여
      실행합니다.
   16
   17 ### 4.2. 화면 구성
   18
   19  <!-- UI 스크린샷 예시 URL -->
   20
   21 -   **기간 설정 (DateTimePicker):** 초기 데이터 로드를 수행할 시작일과
      종료일을 선택합니다.
   22 -   **테스트 모드 (Checkbox):** 이 옵션을 체크하면 전체 관측소가 아닌, 각
      종류별 대표 관측소 1개에 대해서만 데이터를 수집하여 기능을 빠르게 테스트할
      수 있습니다.
   23 -   **초기 데이터 로드 (Button):** 설정된 기간 동안의 모든 데이터를 WAMIS
      API로부터 가져와 데이터베이스에 저장합니다. DB가 비어있을 때 최초 1회
      실행하는 것을 권장합니다.
   24 -   **일일 동기화 (Button):** 어제 하루 동안의 데이터를 가져와
      데이터베이스에 추가/업데이트합니다. 매일 한 번씩 실행하여 최신 데이터를
      유지할 수 있습니다.
   25 -   **최근 7일 데이터 최신화 (Button):** (버튼명은 실제 UI 확인 필요, 가칭
      '데이터 보충' 또는 '최근 데이터 확인') 프로그램 실행 시점 기준 최근 7일간의
      모든 데이터를 WAMIS API로부터 다시 수집하여 데이터베이스에 저장(Upsert)합니다.
      네트워크 문제 등으로 최근 데이터가 누락되었을 가능성이 있을 때 사용하거나,
      주기적으로 최근 데이터의 정확성을 확보하고 싶을 때 실행할 수 있습니다.
   26 -   **로그 창 (RichTextBox):** 데이터 수집 과정, API 요청 URL, 성공/실패
      여부, 오류 메시지 등 모든 작업 내용이 실시간으로 표시됩니다.
   27
   28 ### 4.3. 데이터 수집 절차
   28
   29 #### A. 초기 데이터 로드 (최초 실행 시)
   30
   31 1.  프로그램을 실행합니다.
   32 2.  데이터를 수집할 시작일과 종료일을 선택합니다.
   33 3.  `초기 데이터 로드` 버튼을 클릭합니다.
   34 4.  로그 창을 통해 데이터 수집이 정상적으로 완료될 때까지 기다립니다.
      (데이터 양에 따라 수 시간이 소요될 수 있습니다.)
   35
   36 #### B. 일일 데이터 동기화
   37
   38 1.  프로그램을 실행합니다.
   39 2.  `일일 동기화` 버튼을 클릭합니다.
   40 3.  로그 창을 통해 어제 날짜의 데이터 동기화가 완료될 때까지 기다립니다.
   41
   42 #### C. 최근 7일 데이터 최신화 (필요시)
   43
   44 1.  프로그램을 실행합니다.
   45 2.  (가칭) `데이터 보충` 또는 `최근 데이터 확인` 버튼을 클릭합니다.
   46 3.  로그 창을 통해 최근 7일간의 데이터가 성공적으로 수집 및 업데이트 될
      때까지 기다립니다.
   47
   48 ## 5. 문제 해결 (Troubleshooting)
   43
   44 -   **프로그램이 실행되지 않는 경우:**
   45     -   .NET Framework 4.8이 설치되어 있는지 확인하세요.
   46 -   **데이터 수집이 실패하는 경우:**
   47     -   로그 창에 표시되는 오류 메시지를 확인하세요.
   48     -   `App.config` 파일의 API 키와 데이터베이스 연결 정보가 올바른지 다시
      한 번 확인하세요.
   49     -   인터넷 연결이 정상적인지 확인하세요.
   50     -   PostgreSQL 데이터베이스 서버가 실행 중이고 네트워크 방화벽에서
      접근이 허용되어 있는지 확인하세요.
   51 -   **기타 문제:**
   52     -   로그 창의 내용을 복사하여 시스템 관리자에게 문의하세요.