 prd.md


    1 # 제품 요구사항 문서 (PRD)
    2
    3 ## 1. 개요
    4
    5 본 문서는 WAMIS (Water Management Information System) API를 통해 수자원
      관련 데이터를 수집하고, 이를 PostgreSQL 데이터베이스에 저장하는
      'WamisDataCollector' 애플리케이션의 요구사항을 정의합니다.
    6
    7 ## 2. 주요 기능
    8
    9 ### 2.1. 데이터 수집
   10
   11 - **API 연동:** WAMIS에서 제공하는 Open API를 사용하여 데이터를 수집합니다.
   12 - **데이터 종류:**
   13     - 강수량 (시간별, 일별, 월별)
   14     - 수위 (시간별, 일별)
   15     - 기상 정보 (시간별, 일별)
   16     - 유량 (일별 및 유량 측정 정보)
   17 - **수집 주기:**
   18     - **초기 데이터 로드:** 사용자가 지정한 기간 동안의 전체 데이터를
      일괄적으로 수집합니다.
   19     - **일일 동기화:** 매일 자동으로 최신 데이터를 수집하여 데이터베이스를
      업데이트합니다.
	      - **최근 7일 데이터 최신화:** 매일 또는 필요시 최근 7일간의 데이터를 WAMIS
     API로부터 다시 수집하여 데이터베이스를 최신 상태로 업데이트합니다. 이
     기능은 특정 누락 구간을 식별하기보다는 지정된 최근 기간의 데이터를
     일괄적으로 갱신합니다.
   20
   21 ### 2.2. 데이터 저장
   22
   23 - **데이터베이스:** 수집된 데이터는 PostgreSQL 데이터베이스에 저장됩니다.
   24 - **테이블 구조:** 각 데이터 종류 및 주기에 따라 별도의 테이블에 데이터를
      저장합니다. (예: `rf_hourly`, `wl_daily` 등)
   25 - **데이터 무결성:** 관측소 코드와 관측 시간을 기본 키(Primary Key)로
      사용하여 데이터 중복을 방지합니다.
   26
   27 ### 2.3. 사용자 인터페이스 (UI)
   28
   29 - **직관적인 UI:** 사용자가 쉽게 데이터 수집을 시작하고 진행 상황을
      모니터링할 수 있는 Windows Forms 기반의 GUI를 제공합니다.
   30 - **기능 버튼:** "초기 데이터 로드" 및 "일일 동기화" 기능을 실행할 수 있는
      버튼을 제공합니다.
   31 - **로그 표시:** 데이터 수집 과정 및 결과를 실시간으로 확인할 수 있는 로그
      창을 제공합니다.
   32 - **테스트 모드:** 전체 관측소가 아닌, 각 종류별 대표 관측소 하나에
      대해서만 데이터를 수집하여 빠르게 기능을 테스트할 수 있는 옵션을
      제공합니다.
   33
   34 ### 2.4. 설정 관리
   35
   36 - **외부 설정 파일:** API 키, API 기본 URL, 데이터베이스 연결 문자열 등
      주요 설정은 `App.config` 파일을 통해 관리하여 코드 수정 없이 변경할 수
      있도록 합니다.
   37
   38 ## 3. 비기능적 요구사항
   39
   40 - **안정성:** 장기간 데이터 수집 작업에도 안정적으로 동작해야 합니다.
   41 - **오류 처리:** API 요청 실패, 데이터베이스 연결 오류 등 다양한 예외
      상황에 대한 적절한 오류 처리 및 로깅 기능을 갖추어야 합니다.
   42 - **확장성:** 향후 새로운 데이터 종류나 API가 추가될 경우, 쉽게 확장할 수
      있는 구조로 설계되어야 합니다.
   43
   44 ## 4. 향후 개선 사항
   45
   46 - **데이터 시각화:** 수집된 데이터를 차트나 그래프 형태로 시각화하는 기능
      추가를 고려할 수 있습니다.
   47 - **다양한 데이터베이스 지원:** PostgreSQL 외에 다른 데이터베이스
      시스템(예: MySQL, MS-SQL)을 지원할 수 있도록 데이터 서비스 계층을
      추상화하는 것을 고려할 수 있습니다.
   48 - **웹 기반 대시보드:** 수집 현황 및 통계를 확인할 수 있는 웹 기반 대시보드
      개발을 고려할 수 있습니다.